<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wind Tunnel Booking - DESN1000 | UNSW Engineering</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --unsw-blue: #002664;
            --unsw-blue-light: #003d99;
            --unsw-yellow: #ffcc00;
            --unsw-yellow-dark: #e6b800;
            --tech-grey: #f4f6f9;
            --text-primary: #1a1a2e;
            --text-secondary: #5a5a6e;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 15px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 40px rgba(0,0,0,0.12);
            --shadow-xl: 0 20px 60px rgba(0,0,0,0.15);
            --radius-sm: 8px;
            --radius-md: 16px;
            --radius-lg: 24px;
            --transition-fast: 0.2s ease;
            --transition-normal: 0.3s ease;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            color: var(--text-primary);
            background: var(--tech-grey);
            line-height: 1.6;
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(63, 97, 196, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 220, 0, 0.2);
            transition: all var(--transition-normal);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
            text-decoration: none;
            font-family: 'Roboto', Arial, sans-serif;
            font-weight: 800;
            font-size: 1.5rem;
            transition: transform var(--transition-fast);
        }

        .nav-logo:hover {
            transform: scale(1.02);
        }

        .nav-links {
            display: flex;
            gap: 6px;
            list-style: none;
        }

        .nav-links a {
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            padding: 10px 18px;
            border-radius: var(--radius-sm);
            font-weight: 500;
            font-size: 0.9rem;
            transition: all var(--transition-fast);
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 6px;
            left: 50%;
            width: 0;
            height: 2px;
            background: #ffdc00;
            transition: all var(--transition-fast);
            transform: translateX(-50%);
        }

        .nav-links a:hover::after {
            width: 60%;
        }

        .nav-links a:hover {
            color: #ffdc00;
        }

        .nav-cta {
            background: #ffdc00 !important;
            color: #3f61c4 !important;
            font-weight: 600 !important;
            box-shadow: 0 4px 15px rgba(255, 220, 0, 0.3);
        }

        .nav-cta::after {
            display: none !important;
        }

        .nav-cta:hover {
            background: #e6c600 !important;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 220, 0, 0.4);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-sm);
            transition: background var(--transition-fast);
        }

        .mobile-menu-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Page Header */
        .page-header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            padding: 140px 30px 100px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .page-header::before {
            content: "";
            position: absolute;
            inset: 0;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: float 20s ease-in-out infinite;
        }

        .page-header::after {
            content: "üí®";
            position: absolute;
            right: 5%;
            top: 50%;
            transform: translateY(-50%);
            font-size: 15rem;
            opacity: 0.1;
        }

        .page-header-content {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .breadcrumb a {
            color: white;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .page-header h1 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .page-header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
        }

        /* Main Content */
        .main-content {
            max-width: 1200px;
            margin: -40px auto 60px;
            padding: 0 30px;
            position: relative;
            z-index: 10;
        }

        /* Alert Box */
        .alert-box {
            display: flex;
            gap: 20px;
            padding: 24px;
            border-radius: var(--radius-md);
            margin-bottom: 30px;
            align-items: flex-start;
        }

        .alert-danger {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-left: 5px solid var(--danger);
        }

        .alert-warning {
            background: #fffbeb;
            border: 1px solid #fcd34d;
            border-left: 5px solid var(--warning);
        }

        .alert-info {
            background: #eff6ff;
            border: 1px solid #93c5fd;
            border-left: 5px solid var(--info);
        }

        .alert-icon {
            font-size: 1.8rem;
            flex-shrink: 0;
        }

        .alert-content h4 {
            font-weight: 700;
            margin-bottom: 6px;
            color: var(--text-primary);
        }

        .alert-content p {
            margin: 0;
            color: var(--text-secondary);
        }

        /* Cards */
        .content-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 40px;
            box-shadow: var(--shadow-md);
            margin-bottom: 30px;
            transition: transform var(--transition-normal), box-shadow var(--transition-normal);
            border: 1px solid rgba(0,0,0,0.04);
        }

        .content-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }

        .content-card h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--unsw-blue);
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .content-card h2::before {
            content: "";
            width: 5px;
            height: 28px;
            background: linear-gradient(180deg, var(--unsw-yellow), var(--info));
            border-radius: 3px;
        }

        /* Grid Layouts */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .three-column {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }

        @media (max-width: 768px) {
            .two-column, .three-column {
                grid-template-columns: 1fr;
            }
        }

        /* Checklist */
        .checklist {
            list-style: none;
        }

        .checklist li {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 16px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .checklist li:last-child {
            border-bottom: none;
        }

        .checklist-box {
            width: 24px;
            height: 24px;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-top: 2px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .checklist-box:hover {
            border-color: var(--success);
        }

        .checklist-box.checked {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .checklist-content h4 {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .checklist-content p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin: 0;
        }

        /* Schedule Table */
        .schedule-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            border: 1px solid #e5e7eb;
        }

        .schedule-table th {
            background: var(--unsw-blue);
            color: white;
            padding: 16px 20px;
            text-align: left;
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .schedule-table td {
            padding: 16px 20px;
            border-bottom: 1px solid #f3f4f6;
            vertical-align: top;
        }

        .schedule-table tr:last-child td {
            border-bottom: none;
        }

        .schedule-table tr:nth-child(even) {
            background: #fafafa;
        }

        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .badge-practice {
            background: #dbeafe;
            color: #1e40af;
        }

        .badge-formal {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Booking Form */
        .booking-form {
            background: var(--tech-grey);
            border-radius: var(--radius-md);
            padding: 30px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .form-group .hint {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 6px;
        }

        .form-control {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e5e7eb;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.2s;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--unsw-blue);
            box-shadow: 0 0 0 3px rgba(0, 38, 100, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 600px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 16px 32px;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 1rem;
            text-decoration: none;
            transition: all var(--transition-normal);
            cursor: pointer;
            border: none;
            font-family: inherit;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.3) 50%, transparent 60%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .btn:hover::before {
            transform: translateX(100%);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--unsw-blue), var(--unsw-blue-light));
            color: white;
            width: 100%;
            box-shadow: 0 4px 15px rgba(0, 38, 100, 0.25);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--unsw-blue-light), var(--unsw-blue));
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 38, 100, 0.35);
        }

        .btn-secondary {
            background: white;
            color: var(--unsw-blue);
            border: 2px solid var(--unsw-blue);
        }

        .btn-secondary:hover {
            background: var(--unsw-blue);
            color: white;
            transform: translateY(-2px);
        }

        /* Info Cards */
        .info-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 28px;
            border: 1px solid #e5e7eb;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .info-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--unsw-blue), var(--info));
            transform: scaleX(0);
            transition: transform var(--transition-normal);
            transform-origin: left;
        }

        .info-card:hover {
            border-color: var(--unsw-yellow);
            box-shadow: var(--shadow-lg);
            transform: translateY(-4px);
        }

        .info-card:hover::before {
            transform: scaleX(1);
        }

        .info-card-icon {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            margin-bottom: 18px;
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.25);
            transition: transform var(--transition-normal);
        }

        .info-card:hover .info-card-icon {
            transform: scale(1.1) rotate(-5deg);
        }

        .info-card h3 {
            font-size: 1.15rem;
            font-weight: 700;
            color: var(--unsw-blue);
            margin-bottom: 10px;
        }

        .info-card p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Steps */
        .steps {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .step {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            padding: 16px;
            border-radius: var(--radius-md);
            transition: all var(--transition-normal);
        }

        .step:hover {
            background: rgba(0, 38, 100, 0.02);
        }

        .step-number {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--unsw-blue), var(--info));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(0, 38, 100, 0.25);
            transition: transform var(--transition-fast);
        }

        .step:hover .step-number {
            transform: scale(1.1);
        }

        .step-content h4 {
            font-weight: 700;
            margin-bottom: 6px;
        }

        .step-content p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Footer */
        .footer {
            background: #1a1a2e;
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .footer p {
            opacity: 0.7;
            font-size: 0.9rem;
        }

        .footer a {
            color: var(--unsw-yellow);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Booking Slots */
        .slot-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .slot {
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: var(--radius-sm);
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }

        .slot:hover:not(.slot-unavailable) {
            border-color: var(--unsw-blue);
            background: #eff6ff;
        }

        .slot.slot-selected {
            border-color: var(--unsw-blue);
            background: var(--unsw-blue);
            color: white;
        }

        .slot-unavailable {
            background: #fef2f2;
            border-color: #fca5a5;
            color: #dc2626;
            cursor: not-allowed;
        }

        .slot-unavailable .slot-status {
            color: #dc2626;
            font-weight: 600;
        }

        .slot-time {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .slot-status {
            font-size: 0.75rem;
            margin-top: 4px;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                DESN1000 Engineering Design and Innovation
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="index.html#gallery">Gallery</a></li>
                <li><a href="index.html#timetable">Timetable</a></li>
                <li><a href="index.html#resources">Resources</a></li>
                <li><a href="index.html#assessments">Assessments</a></li>
                <li><a href="index.html#bookings" style="color: #ffdc00;">Bookings</a></li>
                <li><a href="https://moodle.telt.unsw.edu.au/course/view.php?id=96636" class="nav-cta" target="_blank">Moodle Portal</a></li>
            </ul>
            <button class="mobile-menu-btn">‚ò∞</button>
        </div>
    </nav>

    <!-- Page Header -->
    <header class="page-header">
        <div class="page-header-content">
            <div class="breadcrumb">
                <a href="index.html">Home</a>
                <span>‚Ä∫</span>
                <span>Bookings</span>
                <span>‚Ä∫</span>
                <span>Wind Tunnel</span>
            </div>
            <h1>
                <span style="font-size: 2.5rem;">üí®</span>
                Wind Tunnel Booking
            </h1>
            <p>Book your team's wind tunnel testing session. All bookings are managed through Moodle - only one person per group needs to make the booking.</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Important Alert -->
        <div class="alert-box alert-danger">
            <span class="alert-icon">üö´</span>
            <div class="alert-content">
                <h4>Compliance Required Before Testing</h4>
                <p>You will NOT be able to test your wing in the wind tunnel if it does not meet the required specifications. Please ensure your prototype is fully compliant before your booked session.</p>
            </div>
        </div>

        <div class="two-column">
            <!-- Left Column -->
            <div>
                <!-- Pre-Testing Checklist -->
                <div class="content-card">
                    <h2>Pre-Testing Checklist</h2>
                    <p style="margin-bottom: 24px; color: var(--text-secondary);">
                        Complete all items before arriving at your booked session. Teams with incomplete setups will not be permitted to test.
                    </p>
                    <ul class="checklist">
                        <li>
                            <div class="checklist-box" onclick="this.classList.toggle('checked')">
                                <span style="display: none;">‚úì</span>
                            </div>
                            <div class="checklist-content">
                                <h4>Wind Tunnel Mount</h4>
                                <p>Correct location and installation verified</p>
                            </div>
                        </li>
                        <li>
                            <div class="checklist-box" onclick="this.classList.toggle('checked')">
                                <span style="display: none;">‚úì</span>
                            </div>
                            <div class="checklist-content">
                                <h4>Morphing Wing Prototype</h4>
                                <p>Fully assembled and functional</p>
                            </div>
                        </li>
                        <li>
                            <div class="checklist-box" onclick="this.classList.toggle('checked')">
                                <span style="display: none;">‚úì</span>
                            </div>
                            <div class="checklist-content">
                                <h4>Electronic & Arduino Setup</h4>
                                <p>Wired, coded, and tested beforehand</p>
                            </div>
                        </li>
                        <li>
                            <div class="checklist-box" onclick="this.classList.toggle('checked')">
                                <span style="display: none;">‚úì</span>
                            </div>
                            <div class="checklist-content">
                                <h4>Servo Motor & Power Supply</h4>
                                <p>Connected and operational</p>
                            </div>
                        </li>
                        <li>
                            <div class="checklist-box" onclick="this.classList.toggle('checked')">
                                <span style="display: none;">‚úì</span>
                            </div>
                            <div class="checklist-content">
                                <h4>Team Data Sheet</h4>
                                <p>Ready to record data and morphing wing deflection</p>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Testing Schedule -->
                <div class="content-card">
                    <h2>Testing Schedule</h2>
                    
                    <h3 style="font-size: 1.1rem; margin-bottom: 16px; color: var(--text-primary);">
                        <span class="badge badge-practice">Practice Testing</span> Weeks 3‚Äì5, 8‚Äì9
                    </h3>
                    <p style="margin-bottom: 20px; color: var(--text-secondary);">
                        Each team can book a 20-minute pre-testing slot during their Project Class. Purpose: Identify design flaws early, trial morphing functionality, and refine before formal assessment.
                    </p>
                    
                    <table class="schedule-table" style="margin-bottom: 30px;">
                        <thead>
                            <tr>
                                <th>Days</th>
                                <th>Times</th>
                                <th>Location</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Monday / Thursday</strong></td>
                                <td>12‚Äì2pm; 3‚Äì5pm</td>
                                <td>J18-105 Solids Lab</td>
                            </tr>
                            <tr>
                                <td><strong>Wednesday / Friday</strong></td>
                                <td>10am‚Äì2pm</td>
                                <td>J18-105 Solids Lab</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 style="font-size: 1.1rem; margin-bottom: 16px; color: var(--text-primary);">
                        <span class="badge badge-formal">Formal Testing</span> Weeks 7 & 10
                    </h3>
                    <p style="margin-bottom: 20px; color: var(--text-secondary);">
                        Assessment testing sessions. Access is available only during scheduled times and must be pre-booked via Moodle ‚Äî no walk-ins permitted.
                    </p>
                    
                    <table class="schedule-table">
                        <thead>
                            <tr>
                                <th>Days</th>
                                <th>Times</th>
                                <th>Location</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Monday / Thursday</strong></td>
                                <td>12‚Äì5pm</td>
                                <td>Design Next Studio (DNS)</td>
                            </tr>
                            <tr>
                                <td><strong>Wednesday / Friday</strong></td>
                                <td>9am‚Äì1pm</td>
                                <td>Design Next Studio (DNS)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Right Column - Booking Form -->
            <div>
                <div class="content-card">
                    <h2>Book Your Session</h2>

                    <!-- Success Message (hidden by default) -->
                    <div id="bookingSuccess" style="display:none; background: #ecfdf5; border: 2px solid #10b981; border-radius: 12px; padding: 24px; text-align: center; margin-bottom: 20px;">
                        <div style="font-size: 2rem; margin-bottom: 8px;">‚úÖ</div>
                        <h3 style="color: #065f46; margin-bottom: 8px;">Booking Confirmed!</h3>
                        <p id="bookingConfirmText" style="color: #047857;"></p>
                    </div>

                    <div class="booking-form" id="bookingForm">
                        <div class="form-group">
                            <label for="testingType">Testing Type *</label>
                            <select class="form-control" id="testingType" onchange="onSelectionChange()">
                                <option value="">Select testing type...</option>
                                <option value="practice">Practice Testing (Weeks 3‚Äì5, 8‚Äì9)</option>
                                <option value="formal">Formal Assessment (Weeks 7 & 10)</option>
                            </select>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="week">Week *</label>
                                <select class="form-control" id="week" onchange="onSelectionChange()">
                                    <option value="">Select week...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="day">Day *</label>
                                <select class="form-control" id="day" onchange="onSelectionChange()">
                                    <option value="">Select day...</option>
                                    <option value="monday">Monday</option>
                                    <option value="wednesday">Wednesday</option>
                                    <option value="thursday">Thursday</option>
                                    <option value="friday">Friday</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Available Time Slots</label>
                            <div class="slot-grid" id="slotGrid">
                                <p style="color: var(--text-secondary); grid-column: 1/-1; text-align: center; padding: 20px;">
                                    Select a testing type, week, and day to see available slots.
                                </p>
                            </div>
                            <p class="hint">Each slot is 20 minutes. Click to select. <span style="display:inline-block; width:10px; height:10px; background:#ef4444; border-radius:3px; margin: 0 2px;"></span> = Booked</p>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="groupName">Team/Group Name *</label>
                                <input type="text" class="form-control" id="groupName" placeholder="e.g., 1A-A">
                            </div>
                            <div class="form-group">
                                <label for="zid">Your zID *</label>
                                <input type="text" class="form-control" id="zid" placeholder="e.g., z5123456">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="email">Contact Email *</label>
                            <input type="email" class="form-control" id="email" placeholder="z5123456@ad.unsw.edu.au">
                        </div>

                        <div class="form-group" style="margin-bottom: 0;">
                            <button class="btn btn-primary" id="submitBtn" onclick="submitBooking()" style="width:100%; cursor:pointer;">
                                Book This Slot ‚Üí
                            </button>
                            <p id="formError" style="color: #ef4444; text-align: center; margin-top: 12px; display: none;"></p>
                        </div>
                    </div>
                </div>

                <!-- Quick Info Cards -->
                <div class="three-column" style="margin-top: 30px;">
                    <div class="info-card">
                        <div class="info-card-icon">‚è±Ô∏è</div>
                        <h3>20 Minutes</h3>
                        <p>Each testing slot duration</p>
                    </div>
                    <div class="info-card">
                        <div class="info-card-icon">üë•</div>
                        <h3>1 Booking</h3>
                        <p>Per group per session type</p>
                    </div>
                    <div class="info-card">
                        <div class="info-card-icon">üìç</div>
                        <h3>DNS / J18</h3>
                        <p>Testing locations</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Process Steps -->
        <div class="content-card" style="margin-top: 30px;">
            <h2>Testing Day Process</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Arrive 5 Minutes Early</h4>
                        <p>Come to your designated location with your fully assembled prototype and all team members ready.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Compliance Check</h4>
                        <p>A demonstrator will verify your prototype meets all requirements before testing begins.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Mount & Calibrate</h4>
                        <p>Install your wing on the wind tunnel mount and perform final calibration of your Arduino system.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Conduct Testing</h4>
                        <p>Run your tests, record data on your team data sheet, and document wing deflection measurements.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h4>Pack Up</h4>
                        <p>Carefully remove your prototype, ensure the testing area is clean for the next team.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>DESN1000 Engineering Design ‚Ä¢ UNSW Sydney ‚Ä¢ <a href="index.html">Return to Home</a></p>
    </footer>

    <script>

        // Checklist toggle
        document.querySelectorAll('.checklist-box').forEach(box => {
            box.addEventListener('click', function() {
                const check = this.querySelector('span');
                if (this.classList.contains('checked')) {
                    check.style.display = 'none';
                } else {
                    check.style.display = 'block';
                }
            });
        });
    </script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>

    <script>
        // ============================================
        // WIND TUNNEL BOOKING SYSTEM
        // ============================================

        let selectedSlot = null;
        let bookedSlots = [];

        // Time slot definitions based on testing type and day
        const PRACTICE_WEEKS = [3, 4, 5, 8, 9];
        const FORMAL_WEEKS = [7, 10];

        function generateTimeSlots(startHour, startMin, endHour, endMin, interval) {
            const slots = [];
            let h = startHour, m = startMin;
            while (h < endHour || (h === endHour && m < endMin)) {
                const period = h >= 12 ? 'PM' : 'AM';
                const displayH = h > 12 ? h - 12 : (h === 0 ? 12 : h);
                const displayM = m.toString().padStart(2, '0');
                slots.push(`${displayH}:${displayM} ${period}`);
                m += interval;
                if (m >= 60) { h++; m -= 60; }
            }
            return slots;
        }

        function getSlots(testingType, day) {
            const isMonThu = (day === 'monday' || day === 'thursday');
            if (testingType === 'practice') {
                if (isMonThu) {
                    // 12-2pm and 3-5pm
                    return [
                        ...generateTimeSlots(12, 0, 14, 0, 20),
                        ...generateTimeSlots(15, 0, 17, 0, 20)
                    ];
                } else {
                    // 10am-2pm
                    return generateTimeSlots(10, 0, 14, 0, 20);
                }
            } else if (testingType === 'formal') {
                if (isMonThu) {
                    // 12-5pm
                    return generateTimeSlots(12, 0, 17, 0, 20);
                } else {
                    // 9am-1pm
                    return generateTimeSlots(9, 0, 13, 0, 20);
                }
            }
            return [];
        }

        // Update week dropdown based on testing type
        document.getElementById('testingType').addEventListener('change', function() {
            const weekSelect = document.getElementById('week');
            const type = this.value;
            weekSelect.innerHTML = '<option value="">Select week...</option>';

            const weeks = type === 'practice' ? PRACTICE_WEEKS : type === 'formal' ? FORMAL_WEEKS : [];
            weeks.forEach(w => {
                weekSelect.innerHTML += `<option value="${w}">Week ${w}</option>`;
            });
        });

        // Load slots when all three selections are made
        async function onSelectionChange() {
            const testingType = document.getElementById('testingType').value;
            const week = document.getElementById('week').value;
            const day = document.getElementById('day').value;
            const slotGrid = document.getElementById('slotGrid');

            selectedSlot = null;

            if (!testingType || !week || !day) {
                slotGrid.innerHTML = '<p style="color: var(--text-secondary); grid-column: 1/-1; text-align: center; padding: 20px;">Select a testing type, week, and day to see available slots.</p>';
                return;
            }

            // Show loading
            slotGrid.innerHTML = '<p style="color: var(--text-secondary); grid-column: 1/-1; text-align: center; padding: 20px;">Loading available slots...</p>';

            // Get booked slots from Firestore
            try {
                const snapshot = await db.collection('bookings')
                    .where('facility', '==', 'wind-tunnel')
                    .where('testingType', '==', testingType)
                    .where('week', '==', parseInt(week))
                    .where('day', '==', day)
                    .get();

                bookedSlots = snapshot.docs.map(doc => doc.data().timeSlot);
            } catch (error) {
                console.error('Error loading bookings:', error);
                bookedSlots = [];
            }

            // Generate slot grid
            const slots = getSlots(testingType, day);
            slotGrid.innerHTML = '';

            if (slots.length === 0) {
                slotGrid.innerHTML = '<p style="color: var(--text-secondary); grid-column: 1/-1; text-align: center; padding: 20px;">No slots available for this selection.</p>';
                return;
            }

            slots.forEach(time => {
                const isBooked = bookedSlots.includes(time);
                const div = document.createElement('div');
                div.className = 'slot' + (isBooked ? ' slot-unavailable' : '');
                div.innerHTML = `
                    <div class="slot-time">${time}</div>
                    <div class="slot-status">${isBooked ? 'Booked' : 'Available'}</div>
                `;
                if (!isBooked) {
                    div.addEventListener('click', function() {
                        document.querySelectorAll('.slot').forEach(s => s.classList.remove('slot-selected'));
                        this.classList.add('slot-selected');
                        this.querySelector('.slot-status').textContent = 'Selected';
                        selectedSlot = time;
                    });
                }
                slotGrid.appendChild(div);
            });
        }

        // Submit booking to Firestore
        async function submitBooking() {
            const testingType = document.getElementById('testingType').value;
            const week = document.getElementById('week').value;
            const day = document.getElementById('day').value;
            const teamName = document.getElementById('groupName').value.trim();
            const zid = document.getElementById('zid').value.trim();
            const email = document.getElementById('email').value.trim();
            const errorEl = document.getElementById('formError');
            const submitBtn = document.getElementById('submitBtn');

            // Validation
            if (!testingType || !week || !day || !selectedSlot || !teamName || !zid || !email) {
                errorEl.textContent = 'Please fill in all fields and select a time slot.';
                errorEl.style.display = 'block';
                return;
            }

            if (!zid.match(/^z\d{7}$/i)) {
                errorEl.textContent = 'Please enter a valid zID (e.g., z5123456).';
                errorEl.style.display = 'block';
                return;
            }

            if (!email.includes('@') || !email.includes('.')) {
                errorEl.textContent = 'Please enter a valid email address.';
                errorEl.style.display = 'block';
                return;
            }

            errorEl.style.display = 'none';
            submitBtn.disabled = true;
            submitBtn.textContent = 'Booking...';

            try {
                // Double-check the slot is still available
                const check = await db.collection('bookings')
                    .where('facility', '==', 'wind-tunnel')
                    .where('testingType', '==', testingType)
                    .where('week', '==', parseInt(week))
                    .where('day', '==', day)
                    .where('timeSlot', '==', selectedSlot)
                    .get();

                if (!check.empty) {
                    errorEl.textContent = 'Sorry, this slot was just booked by someone else. Please select another slot.';
                    errorEl.style.display = 'block';
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Book This Slot ‚Üí';
                    onSelectionChange(); // Refresh slots
                    return;
                }

                // Submit the booking
                await db.collection('bookings').add({
                    facility: 'wind-tunnel',
                    testingType: testingType,
                    week: parseInt(week),
                    day: day,
                    timeSlot: selectedSlot,
                    teamName: teamName,
                    zid: zid.toLowerCase(),
                    email: email.toLowerCase(),
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                // Show success
                document.getElementById('bookingForm').style.display = 'none';
                const successEl = document.getElementById('bookingSuccess');
                successEl.style.display = 'block';
                document.getElementById('bookingConfirmText').textContent =
                    `${teamName} is booked for ${testingType} testing ‚Äî Week ${week}, ${day.charAt(0).toUpperCase() + day.slice(1)} at ${selectedSlot}.`;

            } catch (error) {
                console.error('Booking error:', error);
                errorEl.textContent = 'Something went wrong. Please try again.';
                errorEl.style.display = 'block';
                submitBtn.disabled = false;
                submitBtn.textContent = 'Book This Slot ‚Üí';
            }
        }
    </script>
</body>
</html>
